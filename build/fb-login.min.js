!function(n){"use strict";!function(n,t,e){var i,o=n.getElementsByTagName(t)[0];n.getElementById(e)||(i=n.createElement(t),i.id=e,i.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(i,o))}(document,"script","facebook-jssdk"),n.fn.visible=function(){return this.css("visibility","visible")},n.fn.invisible=function(){return this.css("visibility","hidden")};var t="fbStatusChanged";!function(){n.fn.fb_subscribe=function(e){function i(n,t){var e=n.find(u.options);e.hide(),t&&"connected"===t&&e.show()}function o(n,t){var e;e="connected"===t?u.loginMessage:"not_authorized"===t?u.notAuthorizeMessage:u.notLoggedinMessage;var i=n.find(u.message);i.text(e),i.show()}function s(t){return function(e,s){var c=n(s);i(c,t),o(c,t)}}function c(){r.find(u.newsletter).change(function(){n.fb_subscriptions.subscribeNewsletter(this.checked)}),r.find(u.offers).change(function(){n.fb_subscriptions.subscribeOffers(this.checked)})}var r=this,u=n.extend(n.fn.fb_subscribe.defaultOptions,e);return n(document).on(t,function(t,e){r.each(s(e.status)).visible(),"connected"===e.status&&n.fb_subscriptions.get().then(function(n){r.find(u.newsletter).prop("checked",0!==n),r.find(u.offers).prop("checked",0!==n),c()})}),this.each(s(null))},n.fn.fb_subscribe.defaultOptions={notLoggedinMessage:"Please log into Facebook.",notAuthorizeMessage:"Please log into this app.",loginMessage:"You are logged in.",options:".permissions-container",newsletter:".newsletter-option",offers:".offers-option",message:".status-message"}}(),function(){function e(e){"connected"!==e.status?c=r=null:(c=e.authResponse.userID,r=e.authResponse.accessToken),n(document).trigger(t,e)}function i(n){FB.init({appId:n,cookie:!0,xfbml:!0,version:"v2.1",status:!0}),FB.getLoginStatus(e),FB.Event.subscribe("auth.authResponseChange",e)}function o(t){return u+"?"+n.param(t)}function s(){var t=n.Deferred();return t.reject(new Error("Unknown Facebook ID.")),t}var c,r,u="http://simulation.dk/other/sumo/checkUser.php",a=null;n.event.special[t]={add:function(n){a&&n.handler(a.event,a.data)},trigger:function(n,t){a={event:n,data:t}}},n.fb_init=function(n){"undefined"!=typeof FB?i(n):window.fbAsyncInit=function(){i(n)}};n.fb_subscriptions={get:function(){return c?n.getJSON(o({op:0,id:c,token:r})):s()},subscribeNewsletter:function(t){return c?n.get(o({op:1,id:c,token:r,val:t?1:0})):s()},subscribeOffers:function(t){return c?n.get(o({op:1,id:c,token:r,val:t?1:0})):s()}}}(),function(){function e(t){var e=n(".lockable-content");if(t){e.addClass("unlockable");var c=n(s);c.remove()}else e.removeClass("unlockable"),e.each(function(t,e){var s=n(e),c=s.parent(),r=n("<div/>").addClass(o);r.height(s.height()),r.width(s.width()),c.append(r);var u=setInterval(function(){r.height()>100&&r.width()>100&&(r.append(i),r.find(".facebook-login").fb_login(),clearInterval(u))},50)}),e.resize(function(t){{var e=n(t.target),i=e.parent(),o=i.offset(),c=e.height(),r=e.width();o.top+"px",o.left+"px"}i.find(s).css({width:r,height:c})})}var i=n("#fb-login-button").html(),o="overlay",s="."+o;n.fn.fb_lockable=function(){return n(document).on(t,function(n,t){var i="connected"===t.status;e(i)}),this.each(function(){var t=n(this);0===t.find(".lockable-content").length&&t.find("> :first-child").addClass("lockable-content")})}}(),function(){n.fn.fb_login=function(){var e=this,i=!1;return this.invisible(),n(document).on(t,function(t,o){var s=n.fn.fb_login.defaultOptions;i="connected"===o.status;var c=i?"logout":"login",r=s[c];n(e.selector).find(s.text).text(r),e.visible()}),this.on("click",function(n){n.preventDefault(),i?FB.logout():FB.login(null,{scope:"public_profile,email"})}),this},n.fn.fb_login.defaultOptions={login:"Log In",logout:"Log Out",text:".sc-text"}}(),function(){function t(){var t=null,e=n(this).data("url"),i=e;History.pushState(t,i,e)}var e={continuous:!1,offset:"50%",handler:t},i={continuous:!1,offset:function(){var t=n.waypoints("viewportHeight");return t/2-n(this).outerHeight()},handler:t};n.fn.fb_scroll=function(){var t=this.selector,o=function(){n(t).waypoint(e),n(t).waypoint(i)};return n(window).resize(function(){n(t).waypoint("destroy"),o()}),o(),this}}()}(jQuery);