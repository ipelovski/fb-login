!function(n){"use strict";!function(n,e,t){var i,o=n.getElementsByTagName(e)[0];n.getElementById(t)||(i=n.createElement(e),i.id=t,i.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(i,o))}(document,"script","facebook-jssdk"),n.fn.visible=function(){return this.css("visibility","visible")},n.fn.invisible=function(){return this.css("visibility","hidden")};var e="fbStatusChanged";!function(){n.fn.fb_subscribe=function(t){function i(n,e){var t=n.find(u.options);t.hide(),e&&"connected"===e&&t.show()}function o(n,e){var t;t="connected"===e?u.loginMessage:"not_authorized"===e?u.notAuthorizeMessage:u.notLoggedinMessage;var i=n.find(u.message);i.text(t),i.show()}function s(e){return function(t,s){var c=n(s);i(c,e),o(c,e)}}function c(){r.find(u.newsletter).change(function(){n.fb_subscriptions.subscribeNewsletter(this.checked)}),r.find(u.offers).change(function(){n.fb_subscriptions.subscribeOffers(this.checked)})}var r=this,u=n.extend(n.fn.fb_subscribe.defaultOptions,t);return n(document).on(e,function(e,t){r.each(s(t.status)).visible(),"connected"===t.status&&n.fb_subscriptions.get().then(function(n){r.find(u.newsletter).prop("checked",0!==n),r.find(u.offers).prop("checked",0!==n),c()})}),this.each(s(null))},n.fn.fb_subscribe.defaultOptions={notLoggedinMessage:"Please log into Facebook.",notAuthorizeMessage:"Please log into this app.",loginMessage:"You are logged in.",options:".permissions-container",newsletter:".newsletter-option",offers:".offers-option",message:".status-message"}}(),function(){function t(t){"connected"!==t.status?c=r=null:(c=t.authResponse.userID,r=t.authResponse.accessToken),n(document).trigger(e,t)}function i(n){FB.init({appId:n,cookie:!0,xfbml:!0,version:"v2.1",status:!0}),FB.getLoginStatus(t),FB.Event.subscribe("auth.authResponseChange",t)}function o(e){return u+"?"+n.param(e)}function s(){var e=n.Deferred();return e.reject(new Error("Unknown Facebook ID.")),e}var c,r,u="http://simulation.dk/other/sumo/checkUser.php",a=null;n.event.special[e]={add:function(n){a&&n.handler(a.event,a.data)},trigger:function(n,e){a={event:n,data:e}}},n.fb_init=function(n){"undefined"!=typeof FB?i(n):window.fbAsyncInit=function(){i(n)}};n.fb_subscriptions={get:function(){return c?n.getJSON(o({op:0,id:c,token:r})):s()},subscribeNewsletter:function(e){return c?n.get(o({op:1,id:c,token:r,val:e?1:0})):s()},subscribeOffers:function(e){return c?n.get(o({op:1,id:c,token:r,val:e?1:0})):s()}}}(),function(){function t(e){var t=n(".lockable-content");if(e){t.addClass("unlockable");var c=n(s);c.remove()}else t.removeClass("unlockable"),t.each(function(e,t){var s=n(t),c=s.parent(),r=n("<div/>").addClass(o);r.height(s.height()),r.width(s.width()),c.append(r);var u=setInterval(function(){r.height()>100&&r.width()>100&&(r.append(i),r.find(".facebook-login").fb_login(),clearInterval(u))},50)}),t.resize(function(e){{var t=n(e.target),i=t.parent(),o=i.offset(),c=t.height(),r=t.width();o.top+"px",o.left+"px"}i.find(s).css({width:r,height:c})})}var i=n("#fb-login-button").html(),o="overlay",s="."+o;n.fn.fb_lockable=function(){return n(document).on(e,function(n,e){var i="connected"===e.status;t(i)}),this.each(function(){var e=n(this);0===e.find(".lockable-content").length&&e.find("> :first-child").addClass("lockable-content")})}}(),function(){n.fn.fb_login=function(){var t=this,i=!1;return this.invisible(),n(document).on(e,function(e,o){var s=n.fn.fb_login.defaultOptions;i="connected"===o.status;var c=i?"logout":"login",r=s[c];n(t.selector).find(s.text).text(r),t.visible()}),this.on("click",function(n){n.preventDefault(),i?FB.logout():FB.login(null,{scope:"public_profile,email"})}),this},n.fn.fb_login.defaultOptions={login:"Log In",logout:"Log Out",text:".sc-text"}}(),function(){function e(){var e=null,t=n(this).data("url"),i=t;History.pushState(e,i,t)}var t={continuous:!1,offset:"50%",handler:e},i={continuous:!1,offset:function(){var e=n.waypoints("viewportHeight");return e/2-n(this).outerHeight()},handler:e};n.fn.fb_scroll=function(){var e=this.selector;return n(e).waypoint(t),n(e).waypoint(i),this}}()}(jQuery);