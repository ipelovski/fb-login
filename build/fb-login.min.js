!function(e){"use strict";!function(e,n,t){var i,o=e.getElementsByTagName(n)[0];e.getElementById(t)||(i=e.createElement(n),i.id=t,i.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(i,o))}(document,"script","facebook-jssdk"),e.fn.visible=function(){return this.css("visibility","visible")},e.fn.invisible=function(){return this.css("visibility","hidden")};var n="fbStatusChanged";!function(){e.fn.fb_subscribe=function(t){function i(e,n){var t=e.find(a.options);t.hide(),n&&"connected"===n&&t.show()}function o(e,n){var t;t="connected"===n?a.loginMessage:"not_authorized"===n?a.notAuthorizeMessage:a.notLoggedinMessage;var i=e.find(a.message);i.text(t),i.show()}function s(n){return function(t,s){var c=e(s);i(c,n),o(c,n)}}function c(){r.find(a.newsletter).change(function(){e.fb_subscriptions.subscribeNewsletter(this.checked)}),r.find(a.offers).change(function(){e.fb_subscriptions.subscribeOffers(this.checked)})}var r=this,a=e.extend(e.fn.fb_subscribe.defaultOptions,t);return e(document).on(n,function(n,t){r.each(s(t.status)).visible(),"connected"===t.status&&e.fb_subscriptions.get().then(function(e){r.find(a.newsletter).prop("checked",0!==e),r.find(a.offers).prop("checked",0!==e),c()})}),this.each(s(null))},e.fn.fb_subscribe.defaultOptions={notLoggedinMessage:"Please log into Facebook.",notAuthorizeMessage:"Please log into this app.",loginMessage:"You are logged in.",options:".permissions-container",newsletter:".newsletter-option",offers:".offers-option",message:".status-message"}}(),function(){function t(t){"connected"!==t.status?c=r=null:(c=t.authResponse.userID,r=t.authResponse.accessToken),e(document).trigger(n,t)}function i(e){FB.init({appId:e,cookie:!0,xfbml:!0,version:"v2.1",status:!0}),FB.getLoginStatus(t),FB.Event.subscribe("auth.authResponseChange",t)}function o(n){return a+"?"+e.param(n)}function s(){var n=e.Deferred();return n.reject(new Error("Unknown Facebook ID.")),n}var c,r,a="http://simulation.dk/other/sumo/checkUser.php",u=null;e.event.special[n]={add:function(e){u&&e.handler(u.event,u.data)},trigger:function(e,n){u={event:e,data:n}}},e.fb_init=function(e){"undefined"!=typeof FB?i(e):window.fbAsyncInit=function(){i(e)}};e.fb_subscriptions={get:function(){return c?e.getJSON(o({op:0,id:c,token:r})):s()},subscribeNewsletter:function(n){return c?e.get(o({op:1,id:c,token:r,val:n?1:0})):s()},subscribeOffers:function(n){return c?e.get(o({op:1,id:c,token:r,val:n?1:0})):s()}}}(),function(){function t(n){var t=e(".lockable-content");if(n){t.addClass("unlockable");var c=e(s);c.remove()}else t.removeClass("unlockable"),t.each(function(n,t){var s=e(t),c=s.parent(),r=e("<div/>").addClass(o);r.height(s.height()),r.width(s.width()),c.append(r);var a=setInterval(function(){r.height()>100&&r.width()>100&&(r.append(i),r.find(".facebook-login").fb_login(),clearInterval(a))},50)}),t.resize(function(n){{var t=e(n.target),i=t.parent(),o=i.offset(),c=t.height(),r=t.width();o.top+"px",o.left+"px"}i.find(s).css({width:r,height:c})})}var i=e("#fb-login-button").html(),o="overlay",s="."+o;e.fn.fb_lockable=function(){return e(document).on(n,function(e,n){var i="connected"===n.status;t(i)}),this.each(function(){var n=e(this);0===n.find(".lockable-content").length&&n.find("> :first-child").addClass("lockable-content")})}}(),function(){e.fn.fb_login=function(){var t=this,i=!1;return this.invisible(),e(document).on(n,function(n,o){var s=e.fn.fb_login.defaultOptions;i="connected"===o.status;var c=i?"logout":"login",r=s[c];e(t.selector).find(s.text).text(r),t.visible()}),this.on("click",function(e){e.preventDefault(),i?FB.logout():FB.login(null,{scope:"public_profile,email"})}),this},e.fn.fb_login.defaultOptions={login:"Log In",logout:"Log Out",text:".sc-text"}}()}(jQuery);